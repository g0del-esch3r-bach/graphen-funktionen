<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Matrix Calculator</title>
  <style>
    /* Use Cascadia Mono for all text elements */
    body, input, textarea, button, label {
      font-family: 'Cascadia Mono', monospace;
    }
    body {
      margin: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    textarea {
      font-family: 'Cascadia Mono', monospace;
      font-size: 14px;
    }
    input, button {
      font-size: 14px;
    }
    /* Style for the blue result boxes */
    .result-box {
      background-color: #ccffe5;  /* Light blue background */
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #00ff40;
      border-radius: 4px;
      width: 50px;
    }
  </style>
</head>
<body>
  <h1>G31-CCF</h1>
  <form id="calcForm">
    <h3><label for="xInput">N =</label></h3>
    <input type="number" id="xInput" name="x" min="1" required>

    <label for="yInput">Î± =</label>
    <input type="number" id="yInput" name="y" required>

    <label for="matrixInput">
      adj
    </label>
    <textarea id="matrixInput" name="matrix" rows="6" cols="30" required></textarea>

    <br><br>
    <button type="button" onclick="submitForm()">go</button>
  </form>

  <div id="resultsContainer"></div>

  <script>
    function submitForm() {
      // Get input values
      const x = document.getElementById('xInput').value.trim();
      const y = document.getElementById('yInput').value.trim();
      const matrix = document.getElementById('matrixInput').value.trim();
      
      // Combine input in the order expected by your C++ programs:
      const inputData = x + "\n" + y + "\n" + matrix;
      
      // Send the data to the backend. The backend should return a JSON object with outputs.
      fetch('/calculate', {
        method: 'POST',
        headers: {
          'Content-Type': 'text/plain'
        },
        body: inputData
      })
      .then(response => {
        if (!response.ok) {
          throw new Error("Server error: " + response.statusText);
        }
        return response.json();  // Expecting a JSON response
      })
      .then(results => {
        // Clear any previous results
        const container = document.getElementById('resultsContainer');
        container.innerHTML = '';

        // Iterate over each result (calc, calc2, calc3, calc4) and create a blue box for each
        for (const key in results) {
          if (results.hasOwnProperty(key)) {
            const div = document.createElement('div');
            div.className = 'result-box';
            div.textContent = key + ": " + results[key];
            container.appendChild(div);
          }
        }
      })
      .catch(error => {
        console.error('Error:', error);
        document.getElementById('resultsContainer').innerHTML =
          '<div class="result-box">Error: ' + error.message + '</div>';
      });
    }
  </script>
</body>
</html>
